<!DOCTYPE html>
<html>
<head>
<script>
var snd1 = new Audio("temple_bell.wav");
var fmnd = new Date("May 7, 2020 06:45:00");
function startTime() {

    var today = new Date();
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();

    var mn = today.getTime() - fmnd.getTime();
    mn %= 2360591599;
    mn /= 2360591599;
    
    var x = printClock(h, m, s, mn);

    var t = setTimeout(startTime, 500);
}
function makeCircle(r, col) {
    
    var c = document.getElementById("myCanvas");
    var x = c.getContext("2d");
     
    x.beginPath();
    x.arc(250, 250, r, 0, 2 * Math.PI);
    x.fillStyle = col;
    x.fill();
}
function makeCircle2(cx, cy, r, col) {
    
    var c = document.getElementById("myCanvas");
    var x = c.getContext("2d");
     
    x.beginPath();
    x.arc(cx, cy, r, 0, 2 * Math.PI);
    x.fillStyle = col;
    x.fill();
}
function makeMoon(mn) {

    //makeCircle2(250, 250, 150, "blue");
    //makeCircle2(250, 250,  30, "red");
    //makeCircle2(160, 250,  60, "red");
    makeCircle2(250, 250,  150, "#08284d");
    //makeCircle2(160, 250,  60, "#0f4d92");


    var rr = 90;
    var moo = mn * (Math.PI) + (Math.PI / 2);
    var ttx = 250 + rr * Math.cos(moo);
    var tty = 250 - rr * Math.sin(moo);
    makeCircle2(ttx, tty,  54, "#0f4d92");
    
    ttx = 250 - rr * Math.cos(moo);
    tty = 250 + rr * Math.sin(moo);
    makeCircle2(ttx, tty,  54, "#0f4d92");
    
    var c = document.getElementById("myCanvas");
    var x = c.getContext("2d");
    var r = 50;
    var col = "#000000";
    x.fillStyle = col;

    let p = new Path2D('m 220, 250 c 0,-16.6 13.4,-30 30,-30 16.6,0 30,13.4 30,30 h 5 c 0,-30.4 24.6,-55 55,-55 30.4,0 55,24.6 55,55 h 10 c 0,85.5 -69.5,155 -155,155 -85.5,0 -155,-69.5 -155,-155 h 10 c 0,-30.4 24.6,-55 55,-55 30.4,0 55,24.6 55,55 z');

    x.fill(p);
     
//    x.beginPath();
//    x.arc(250, 150, r, 0, 2 * Math.PI);
//    x.fill();
}
function makeHand(th, r, w, col) {
    
    var c = document.getElementById("myCanvas");
    var x = c.getContext("2d");
     
    x.beginPath();
    x.lineWidth = w;
    x.lineCap = "round";
    x.strokeStyle = col;
    x.moveTo(250, 250);
    x.lineTo(250 + r * Math.cos(th), 250 + r * Math.sin(th));
    x.stroke();     
}
  function printClock(h, m, s, mn) {
    if (s < 10) {s = "0" + s};  // add zero in front of numbers < 10

    var c = document.getElementById("myCanvas");

    if (m == 0 && s == 0) {
	snd1.play();
    }

    var thh = ((h + (m / 60)) / 12) * 2 * Math.PI - (Math.PI / 2);
    var thm = ((m + (s / 60)) / 60) * 2 * Math.PI - (Math.PI / 2);
    var ths = (s / 60) * 2 * Math.PI - (Math.PI / 2);
    var thb = (s / 60) * 2 * Math.PI - (3 * Math.PI / 2);

    // clock background
    makeCircle("212", "#555555");
    makeCircle("210", "#000000");


    // make moon
    makeMoon(mn);
    

    // make the different hands
    makeHand(thh, 140, "13", "#999999");
    makeHand(thh, 140, "12", "#ffffff");
    makeHand(thm, 178,  "9", "#999999");
    makeHand(thm, 178,  "8", "#ffffff");
    makeHand(ths, 188,  "5", "#fbb000");
    makeHand(thb,  30, "10", "#fbb000");

    // yellow circle in middle
    makeCircle("13", "#fbb000");

    // small ticks, then large ticks
    var tik = c.getContext("2d");
    var i;
    for (i = 0; i < 60; i++) {
	tik.beginPath();
	tik.lineWidth = "2";
	tik.strokeStyle = "#999999"; // Green path
	tik.moveTo(250 + 205 * Math.cos((i / 60) * 2 * Math.PI),
		   250 + 205 * Math.sin((i / 60) * 2 * Math.PI));
	tik.lineTo(250 + 200 * Math.cos((i / 60) * 2 * Math.PI),
		   250 + 200 * Math.sin((i / 60) * 2 * Math.PI));
	tik.stroke();
    }
    for (i = 0; i < 12; i++) {
	tik.beginPath();
	tik.lineWidth = "4";
	tik.strokeStyle = "#999999"; // Green path
	tik.moveTo(250 + 205 * Math.cos((i / 12) * 2 * Math.PI),
		   250 + 205 * Math.sin((i / 12) * 2 * Math.PI));
	tik.lineTo(250 + 195 * Math.cos((i / 12) * 2 * Math.PI),
		   250 + 195 * Math.sin((i / 12) * 2 * Math.PI));
	tik.stroke();
    }
    


    return 0;
}
</script>
</head>


<body onload="startTime()">

  <div id="txt"></div>

  <canvas id="myCanvas" width="500" height="500" style="border:0px solid #d3d3d3;">

</body>
</html>
